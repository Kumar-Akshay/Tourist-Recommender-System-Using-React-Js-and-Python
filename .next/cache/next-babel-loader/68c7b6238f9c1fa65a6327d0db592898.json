{"ast":null,"code":"var express = require('express'),\n    passport = require('passport'),\n    FacebookStrategy = require('passport-facebook').Strategy,\n    session = require('express-session'),\n    cookieParser = require('cookie-parser'),\n    bodyParser = require('body-parser'),\n    app = express();\n\nvar GoogleStrategy = require('passport-google-oauth2').Strategy; // Passport session setup.\n\n\npassport.serializeUser(function (user, done) {\n  done(null, user);\n});\npassport.deserializeUser(function (obj, done) {\n  done(null, obj);\n});\n\nvar facebook = function facebook() {\n  // Use the FacebookStrategy within Passport.\n  passport.use(new FacebookStrategy({\n    clientID: '2264027293896025',\n    clientSecret: '5c231ad93ca6151bb56d1ba97138c882',\n    callbackURL: 'http://localhost:3000/auth/facebook/callback',\n    profileFields: ['id', 'email', 'displayName']\n  }, function (accessToken, refreshToken, profile, done) {\n    process.nextTick(function () {\n      //Check whether the User exists or not using profile.id  \n      console.log(profile.id);\n      console.log(profile.displayName);\n      console.log(profile.emails[0].value);\n      usersController.SaveSocialloginData(profile.displayName, profile.emails[0].value);\n      return done(null, profile);\n    });\n  }));\n  app.get('/auth/facebook', passport.authenticate('facebook', {\n    scope: 'public_profile,email,user_friends,user_posts'\n  }));\n  app.get('/auth/facebook/callback', passport.authenticate('facebook', {\n    successRedirect: 'http://localhost:3000/account',\n    failureRedirect: '/login'\n  }));\n};\n\nvar google = function google() {\n  passport.use(new GoogleStrategy({\n    clientID: \"15625499876-fpnmi7emctu164oed213atj3hunaae2h.apps.googleusercontent.com\",\n    clientSecret: \"ubhRFrrv8iDNo6XIIn82so1X\",\n    callbackURL: \"http://localhost:3000/auth/google/callback\",\n    passReqToCallback: true\n  }, function (request, accessToken, refreshToken, profile, done) {\n    process.nextTick(function () {\n      //Check whether the User exists or not using profile.id\n      console.log(profile.id);\n      console.log(profile.displayName);\n      console.log(profile.email);\n      usersController.SaveSocialloginData(profile.displayName, profile.email);\n      return done(null, profile);\n    });\n  }));\n  app.get('/auth/google', passport.authenticate('google', {\n    scope: ['https://www.googleapis.com/auth/plus.login', 'https://www.googleapis.com/auth/userinfo.email', 'https://www.googleapis.com/auth/userinfo.profile']\n  }));\n  app.get('/auth/google/callback', passport.authenticate('google', {\n    successRedirect: 'http://localhost:3000/account',\n    failureRedirect: '/login'\n  }));\n};\n\nexports.google = google;\nexports.facebook = facebook;","map":{"version":3,"sources":["C:/Users/Samee/Desktop/Portfolio/react-reserve-master/pages/api/sociallogin.js"],"names":["express","require","passport","FacebookStrategy","Strategy","session","cookieParser","bodyParser","app","GoogleStrategy","serializeUser","user","done","deserializeUser","obj","facebook","use","clientID","clientSecret","callbackURL","profileFields","accessToken","refreshToken","profile","process","nextTick","console","log","id","displayName","emails","value","usersController","SaveSocialloginData","get","authenticate","scope","successRedirect","failureRedirect","google","passReqToCallback","request","email","exports"],"mappings":"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","sourcesContent":["const express = require('express'),\r\n    passport = require('passport'),\r\n    FacebookStrategy = require('passport-facebook').Strategy,\r\n    session = require('express-session'),\r\n    cookieParser = require('cookie-parser'),\r\n    bodyParser = require('body-parser'),\r\n    app = express();\r\nconst GoogleStrategy = require('passport-google-oauth2').Strategy;\r\n\r\n// Passport session setup.\r\npassport.serializeUser(function (user, done) {\r\n    done(null, user);\r\n});\r\n\r\npassport.deserializeUser(function (obj, done) {\r\n    done(null, obj);\r\n});\r\n\r\n\r\n\r\nconst facebook = () => {\r\n\r\n    // Use the FacebookStrategy within Passport.\r\n    passport.use(new FacebookStrategy({\r\n        clientID: '2264027293896025',\r\n        clientSecret: '5c231ad93ca6151bb56d1ba97138c882',\r\n        callbackURL: 'http://localhost:3000/auth/facebook/callback',\r\n        profileFields: ['id', 'email', 'displayName']\r\n    },\r\n        function (accessToken, refreshToken, profile, done) {\r\n            process.nextTick(function () {\r\n                //Check whether the User exists or not using profile.id  \r\n                console.log(profile.id);\r\n                console.log(profile.displayName);\r\n                console.log(profile.emails[0].value);\r\n                usersController.SaveSocialloginData(profile.displayName, profile.emails[0].value);\r\n                return done(null, profile);\r\n            });\r\n        }\r\n    ));\r\n\r\n    app.get('/auth/facebook', passport.authenticate('facebook', { scope: 'public_profile,email,user_friends,user_posts' }));\r\n\r\n    app.get('/auth/facebook/callback',\r\n        passport.authenticate('facebook', {\r\n            successRedirect: 'http://localhost:3000/account',\r\n            failureRedirect: '/login'\r\n        }),\r\n    );\r\n}\r\n\r\n\r\n\r\n\r\n\r\nconst google = () => {\r\n\r\n    passport.use(new GoogleStrategy({\r\n        clientID: \"15625499876-fpnmi7emctu164oed213atj3hunaae2h.apps.googleusercontent.com\",\r\n        clientSecret: \"ubhRFrrv8iDNo6XIIn82so1X\",\r\n        callbackURL: \"http://localhost:3000/auth/google/callback\",\r\n        passReqToCallback: true\r\n    },\r\n        function (request, accessToken, refreshToken, profile, done) {\r\n            process.nextTick(function () {\r\n                //Check whether the User exists or not using profile.id\r\n                console.log(profile.id);\r\n                console.log(profile.displayName);\r\n                console.log(profile.email);\r\n                usersController.SaveSocialloginData(profile.displayName, profile.email);\r\n                return done(null, profile);\r\n            });\r\n        }\r\n    ));\r\n\r\n\r\n    app.get('/auth/google',\r\n        passport.authenticate('google', {\r\n            scope:\r\n                ['https://www.googleapis.com/auth/plus.login',\r\n                    'https://www.googleapis.com/auth/userinfo.email',\r\n                    'https://www.googleapis.com/auth/userinfo.profile']\r\n        }\r\n        ));\r\n\r\n    app.get('/auth/google/callback',\r\n        passport.authenticate('google', {\r\n            successRedirect: 'http://localhost:3000/account',\r\n            failureRedirect: '/login'\r\n        }));\r\n\r\n    }\r\n\r\nexports.google = google;\r\nexports.facebook = facebook;\r\n"]},"metadata":{},"sourceType":"script"}