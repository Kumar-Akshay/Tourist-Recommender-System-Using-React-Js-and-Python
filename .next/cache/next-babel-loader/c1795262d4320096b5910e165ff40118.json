{"ast":null,"code":"const express = require('express'),\n      passport = require('passport'),\n      FacebookStrategy = require('passport-facebook').Strategy,\n      session = require('express-session'),\n      cookieParser = require('cookie-parser'),\n      bodyParser = require('body-parser');\n\nconst router = express.Router();\n\nconst GoogleStrategy = require('passport-google-oauth2').Strategy; // Passport session setup.\n\n\npassport.serializeUser(function (user, done) {\n  done(null, user);\n});\npassport.deserializeUser(function (obj, done) {\n  done(null, obj);\n});\n\nconst facebook = () => {\n  // Use the FacebookStrategy within Passport.\n  passport.use(new FacebookStrategy({\n    clientID: '2264027293896025',\n    clientSecret: '5c231ad93ca6151bb56d1ba97138c882',\n    callbackURL: 'http://localhost:3000/auth/facebook/callback',\n    profileFields: ['id', 'email', 'displayName']\n  }, function (accessToken, refreshToken, profile, done) {\n    process.nextTick(function () {\n      //Check whether the User exists or not using profile.id  \n      console.log(profile.id);\n      console.log(profile.displayName);\n      console.log(profile.emails[0].value);\n      return done(null, profile);\n    });\n  }));\n  router.get('/auth/facebook', passport.authenticate('facebook', {\n    scope: 'public_profile,email,user_friends,user_posts'\n  }));\n  router.get('/auth/facebook/callback', passport.authenticate('facebook', {\n    successRedirect: 'http://localhost:3000/account',\n    failureRedirect: '/login'\n  }));\n};\n\nconst google = () => {\n  passport.use(new GoogleStrategy({\n    clientID: \"15625499876-fpnmi7emctu164oed213atj3hunaae2h.apps.googleusercontent.com\",\n    clientSecret: \"ubhRFrrv8iDNo6XIIn82so1X\",\n    callbackURL: \"http://localhost:3000/auth/google/callback\",\n    passReqToCallback: true\n  }, function (request, accessToken, refreshToken, profile, done) {\n    process.nextTick(function () {\n      //Check whether the User exists or not using profile.id\n      console.log(profile.id);\n      console.log(profile.displayName);\n      console.log(profile.email);\n      return done(null, profile);\n    });\n  }));\n  router.get('/auth/google', passport.authenticate('google', {\n    scope: ['https://www.googleapis.com/auth/plus.login', 'https://www.googleapis.com/auth/userinfo.email', 'https://www.googleapis.com/auth/userinfo.profile']\n  }));\n  router.get('/auth/google/callback', passport.authenticate('google', {\n    successRedirect: 'http://localhost:3000/account',\n    failureRedirect: '/login'\n  }));\n};\n\nexports.google = google;\nexports.facebook = facebook;","map":{"version":3,"sources":["C:/Users/Samee/Desktop/Portfolio/react-reserve-master/pages/api/sociallogin.js"],"names":["express","require","passport","FacebookStrategy","Strategy","session","cookieParser","bodyParser","router","Router","GoogleStrategy","serializeUser","user","done","deserializeUser","obj","facebook","use","clientID","clientSecret","callbackURL","profileFields","accessToken","refreshToken","profile","process","nextTick","console","log","id","displayName","emails","value","get","authenticate","scope","successRedirect","failureRedirect","google","passReqToCallback","request","email","exports"],"mappings":"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","sourcesContent":["const express = require('express'),\r\n    passport = require('passport'),\r\n    FacebookStrategy = require('passport-facebook').Strategy,\r\n    session = require('express-session'),\r\n    cookieParser = require('cookie-parser'),\r\n    bodyParser = require('body-parser');\r\nconst router = express.Router();\r\nconst GoogleStrategy = require('passport-google-oauth2').Strategy;\r\n\r\n// Passport session setup.\r\npassport.serializeUser(function (user, done) {\r\n    done(null, user);\r\n});\r\n\r\npassport.deserializeUser(function (obj, done) {\r\n    done(null, obj);\r\n});\r\n\r\n\r\n\r\nconst facebook = () => {\r\n\r\n    // Use the FacebookStrategy within Passport.\r\n    passport.use(new FacebookStrategy({\r\n        clientID: '2264027293896025',\r\n        clientSecret: '5c231ad93ca6151bb56d1ba97138c882',\r\n        callbackURL: 'http://localhost:3000/auth/facebook/callback',\r\n        profileFields: ['id', 'email', 'displayName']\r\n    },\r\n        function (accessToken, refreshToken, profile, done) {\r\n            process.nextTick(function () {\r\n                //Check whether the User exists or not using profile.id  \r\n                console.log(profile.id);\r\n                console.log(profile.displayName);\r\n                console.log(profile.emails[0].value);\r\n                return done(null, profile);\r\n            });\r\n        }\r\n    ));\r\n\r\n    router.get('/auth/facebook', passport.authenticate('facebook', { scope: 'public_profile,email,user_friends,user_posts' }));\r\n\r\n    router.get('/auth/facebook/callback',\r\n        passport.authenticate('facebook', {\r\n            successRedirect: 'http://localhost:3000/account',\r\n            failureRedirect: '/login'\r\n        }),\r\n    );\r\n}\r\n\r\n\r\n\r\n\r\n\r\nconst google = () => {\r\n\r\n    passport.use(new GoogleStrategy({\r\n        clientID: \"15625499876-fpnmi7emctu164oed213atj3hunaae2h.apps.googleusercontent.com\",\r\n        clientSecret: \"ubhRFrrv8iDNo6XIIn82so1X\",\r\n        callbackURL: \"http://localhost:3000/auth/google/callback\",\r\n        passReqToCallback: true\r\n    },\r\n        function (request, accessToken, refreshToken, profile, done) {\r\n            process.nextTick(function () {\r\n                //Check whether the User exists or not using profile.id\r\n                console.log(profile.id);\r\n                console.log(profile.displayName);\r\n                console.log(profile.email);\r\n                return done(null, profile);\r\n            });\r\n        }\r\n    ));\r\n\r\n\r\n    router.get('/auth/google',\r\n        passport.authenticate('google', {\r\n            scope:\r\n                ['https://www.googleapis.com/auth/plus.login',\r\n                    'https://www.googleapis.com/auth/userinfo.email',\r\n                    'https://www.googleapis.com/auth/userinfo.profile']\r\n        }\r\n        ));\r\n\r\n    router.get('/auth/google/callback',\r\n        passport.authenticate('google', {\r\n            successRedirect: 'http://localhost:3000/account',\r\n            failureRedirect: '/login'\r\n        }));\r\n\r\n}\r\n\r\nexports.google = google;\r\nexports.facebook = facebook;\r\n"]},"metadata":{},"sourceType":"script"}